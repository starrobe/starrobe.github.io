import{_ as F}from"./ValaxyMain.vue_vue_type_style_index_0_lang-d8ab152d.js";import{_ as y,u as D,p as i,c as C,w as o,o as A,a as s,b as l,d as a,r as t,e as d}from"./app-2781ddff.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-e8642e2c.js";import"./YunCard.vue_vue_type_script_setup_true_lang-7e7da48c.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-ebad1ef6.js";const Zo=JSON.parse('{"title":"Effective Modern C++","description":"","frontmatter":{"layout":"post","title":"Effective Modern C++","date":"2023-06-18T17:33:27.000Z","categories":"笔记","tags":["C++"]},"headers":[{"level":3,"title":"CHAPTER 1 Deducing Types","slug":"chapter-1-deducing-types","link":"#chapter-1-deducing-types","children":[]},{"level":3,"title":"CHAPTER 2 auto","slug":"chapter-2-auto","link":"#chapter-2-auto","children":[]},{"level":3,"title":"CHAPTER 3 Moving to Modern C++","slug":"chapter-3-moving-to-modern-c","link":"#chapter-3-moving-to-modern-c","children":[]},{"level":3,"title":"CHAPTER 4 Smart pointers","slug":"chapter-4-smart-pointers","link":"#chapter-4-smart-pointers","children":[]},{"level":3,"title":"CHAPTER 5 RValue References, Move Semantics and Perfect Forwarding","slug":"chapter-5-rvalue-references-move-semantics-and-perfect-forwarding","link":"#chapter-5-rvalue-references-move-semantics-and-perfect-forwarding","children":[]},{"level":3,"title":"CHAPTER 6 Lambda表达式","slug":"chapter-6-lambda表达式","link":"#chapter-6-lambda表达式","children":[]},{"level":3,"title":"CHAPTER 7 并发API","slug":"chapter-7-并发api","link":"#chapter-7-并发api","children":[]},{"level":3,"title":"CHAPTER 8 微调","slug":"chapter-8-微调","link":"#chapter-8-微调","children":[]}],"relativePath":"pages/posts/effective-modern-cplusplus.md","path":"/home/runner/work/valaxy/valaxy/pages/posts/effective-modern-cplusplus.md","lastUpdated":1692888211000}'),c=JSON.parse('{"title":"Effective Modern C++","description":"","frontmatter":{"layout":"post","title":"Effective Modern C++","date":"2023-06-18T17:33:27.000Z","categories":"笔记","tags":["C++"]},"headers":[{"level":3,"title":"CHAPTER 1 Deducing Types","slug":"chapter-1-deducing-types","link":"#chapter-1-deducing-types","children":[]},{"level":3,"title":"CHAPTER 2 auto","slug":"chapter-2-auto","link":"#chapter-2-auto","children":[]},{"level":3,"title":"CHAPTER 3 Moving to Modern C++","slug":"chapter-3-moving-to-modern-c","link":"#chapter-3-moving-to-modern-c","children":[]},{"level":3,"title":"CHAPTER 4 Smart pointers","slug":"chapter-4-smart-pointers","link":"#chapter-4-smart-pointers","children":[]},{"level":3,"title":"CHAPTER 5 RValue References, Move Semantics and Perfect Forwarding","slug":"chapter-5-rvalue-references-move-semantics-and-perfect-forwarding","link":"#chapter-5-rvalue-references-move-semantics-and-perfect-forwarding","children":[]},{"level":3,"title":"CHAPTER 6 Lambda表达式","slug":"chapter-6-lambda表达式","link":"#chapter-6-lambda表达式","children":[]},{"level":3,"title":"CHAPTER 7 并发API","slug":"chapter-7-并发api","link":"#chapter-7-并发api","children":[]},{"level":3,"title":"CHAPTER 8 微调","slug":"chapter-8-微调","link":"#chapter-8-微调","children":[]}],"relativePath":"pages/posts/effective-modern-cplusplus.md","path":"/home/runner/work/valaxy/valaxy/pages/posts/effective-modern-cplusplus.md","lastUpdated":1692888211000}'),h={name:"pages/posts/effective-modern-cplusplus.md",data(){return{data:c,frontmatter:c.frontmatter,$frontmatter:c.frontmatter}},setup(){const n=D();n.meta.frontmatter=Object.assign(n.meta.frontmatter,c.frontmatter),i("pageData",c)}},u={id:"chapter-1-deducing-types",tabindex:"-1"},B={id:"条款1-理解模板类型推导",tabindex:"-1"},_=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 此处ParamType泛指param的类型，可以是T，T&，const T&以及T&&")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"ParamType"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"param"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"expr"),s("span",{style:{color:"#89DDFF"}},")")])])])],-1),m={id:"paramtype为指针或引用但不是通用引用",tabindex:"-1"},f=s("blockquote",null,[s("p",null,"通用引用为T&&")],-1),E=s("ol",null,[s("li",null,"如果expr为引用，则忽略引用部分"),s("li",null,"剩下的部分决定T，然后T与形参匹配得出ParamType")],-1),g=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#C792EA"}},"&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"param"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," x "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," cx "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}}," rx "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," cx"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"x"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}},"  // T为int，param的类型为int&")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"cx"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // T为const int，param类型为const int&")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"rx"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // T为const int，param类型为const int&")])])])],-1),v={id:"paramtype是通用引用",tabindex:"-1"},b=s("ul",null,[s("li",null,"expr是左值，T和ParamType都是左值引用"),s("li",null,"expr是右值，T为expr类型，ParamType为右值引用")],-1),T={id:"paramtype既不是指针也不是引用",tabindex:"-1"},k=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"param"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," x "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"27"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," cx "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," x"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}}," rx "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," cx"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// T和param都是int")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"x"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"cx"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"rx"),s("span",{style:{color:"#89DDFF"}},")")])])])],-1),w=s("ol",null,[s("li",null,[s("p",null,"如果expr是引用，忽略引用部分")]),s("li",null,[s("p",null,"如果忽略引用后是const或volatile，它们也会被忽略"),s("p",null,"param只是expr的拷贝，expr不可修改，不代表param也一样"),s("blockquote",null,[s("p",null,"函数实参传递给形参时，会忽略实参的顶层const")]),s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"param"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"char"),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#A6ACCD"}}," ptr "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"Fun with pointers"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},";")])])])]),s("p",null,[l("即T为"),s("code",null,"const char*"),l("类型")])])],-1),x={id:"数组实参",tabindex:"-1"},P=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"param"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"char"),s("span",{style:{color:"#A6ACCD"}}," name[] "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"Effective"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"name"),s("span",{style:{color:"#89DDFF"}},");")])])])],-1),W=s("p",null,[l("此时，name会由数组退化成"),s("code",null,"const char*"),l("指针即T为"),s("code",null,"const char*"),l("类型。但同时也可用引用来表示数组")],-1),R=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#C792EA"}},"&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"param"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"name"),s("span",{style:{color:"#89DDFF"}},");")])])])],-1),I=s("p",null,[l("此时的T为数组引用类型，即"),s("code",null,"const char(&)[10]"),l("，同时我们可以在模板函数中推出数组大小")],-1),q=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#C792EA"}},"size_t"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"N"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"constexpr"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#C792EA"}},"size_t"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"arraySize"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"T"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"(&)["),s("span",{style:{color:"#A6ACCD"}},"N"),s("span",{style:{color:"#89DDFF"}},"])"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"noexcept")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#A6ACCD"}}," N"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),M={id:"函数实参",tabindex:"-1"},N=s("p",null,"与数组一样，函数类型也会退化为函数指针",-1),H=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"someFunc"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"double"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"f1"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"param"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"f2"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#C792EA"}},"&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"param"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"f1"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"someFunc"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}},"  // ParamType为void(*)(int, double)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"f2"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"someFunc"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}},"  // ParamType为void(&)(int, double)")])])])],-1),L=s("ul",null,[s("li",null,"在模板类型推导时，引用会被忽略"),s("li",null,"对于通用引用的推导，左值实参会被特殊对待"),s("li",null,"对于传值类型的推导，实参的常量性和易变性会被忽略"),s("li",null,"在模板类型推导时，数组或函数会退化为指针，除非被用于初始化引用")],-1),z={id:"item2",tabindex:"-1"},$=s("ul",null,[s("li",null,[s("p",null,[l("auto类型拖到通常和模板类型推导相同，但auto类型推导假定花括号初始化代表 "),s("code",null,"std::initializer_list"),l("而模板类型推导不这样做")]),s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"auto"),s("span",{style:{color:"#A6ACCD"}}," x "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#89DDFF"}},"};"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // x的类型为std::initializer_list<int>")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"param"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"{"),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#A6ACCD"}},"}"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}},"  // 不能推导出")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"initializer_list"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"param"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"{"),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#A6ACCD"}},"}"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}},"  // 此时可推出")])])])])]),s("li",null,[s("p",null,"在C++14中允许出现在函数返回值或者lambda函数形参中，但它的工作机制是模板类型推导的方案")])],-1),S={id:"条款3-理解decltype",tabindex:"-1"},j=s("ul",null,[s("li",null,[s("p",null,"decltype总是不加修改的产生变量或表达式的类型")]),s("li",null,[s("p",null,"对于T类型的左值表达式，decltype总是产出T的引用即T&"),s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," a "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"decltype"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"a"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}},"    // int")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"decltype"),s("span",{style:{color:"#89DDFF"}},"(("),s("span",{style:{color:"#A6ACCD"}},"a"),s("span",{style:{color:"#89DDFF"}},"));"),s("span",{style:{color:"#676E95","font-style":"italic"}},"  // int&")])])])])]),s("li",null,[s("p",null,"C++14支持decltype(auto)，就像auto一样，推导出类型，但它使用自己独特规则进行推导"),s("blockquote",null,[s("p",null,"单纯的auto与模板参数推导一样，会忽略引用"),s("p",null,"而在decltype(auto)中，auto说明类型会被推导，decltype说明会按decltype的规则推导")])])],-1),V={id:"条款4-学会查看类型推导结果",tabindex:"-1"},U={id:"chapter-2-auto",tabindex:"-1"},O={id:"条款5-优先考虑auto而非显示类型声明",tabindex:"-1"},G={id:"条款6-auto推导若非己愿-使用显示类型初始化惯用法",tabindex:"-1"},J=s("ul",null,[s("li",null,[s("p",null,"不可见的代理类可能会使auto从表达式中推导出错误的类型"),s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"namespace"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"Allocator"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"vector"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"bool"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"Allocator"),s("span",{style:{color:"#89DDFF"}},">{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"    "),s("span",{style:{color:"#C792EA"}},"public"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"    "),s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"reference"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#F07178"}},"..."),s("span",{style:{color:"#89DDFF"}},"};")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"    "),s("span",{style:{color:"#FFCB6B"}},"reference"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"operator"),s("span",{style:{color:"#FFCB6B"}},"[]"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"size_type"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"n"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"}")])])])]),s("p",null,"reference就是vector的代理类，当使用"),s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"vector"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"bool"),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"feature"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#C792EA"}},"&"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"auto"),s("span",{style:{color:"#A6ACCD"}}," highPriority "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"feature"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"w"),s("span",{style:{color:"#89DDFF"}},")["),s("span",{style:{color:"#F78C6C"}},"5"),s("span",{style:{color:"#89DDFF"}},"];")])])])]),s("p",null,[l("此时期望的是highPriority为bool类型，但实际上auto推导的是"),s("code",null,"std::vector<bool>::reference")])]),s("li",null,[s("p",null,"显式类型初始器惯用强制auto推导出想要的结果"),s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"auto"),s("span",{style:{color:"#A6ACCD"}}," highPriority "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"static_cast<"),s("span",{style:{color:"#C792EA"}},"bool"),s("span",{style:{color:"#89DDFF"}},">("),s("span",{style:{color:"#82AAFF"}},"feature"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"w"),s("span",{style:{color:"#89DDFF"}},")["),s("span",{style:{color:"#F78C6C"}},"5"),s("span",{style:{color:"#89DDFF"}},"]);")])])])])])],-1),Z={id:"chapter-3-moving-to-modern-c",tabindex:"-1"},K={id:"条款7-区别使用-和-创建对象",tabindex:"-1"},Q=s("ul",null,[s("li",null,[s("p",null,"括号初始化可防止变窄转换"),s("blockquote",null,[s("p",null,"括号初始化指的是大括号")])]),s("li",null,[s("p",null,[l("在构造函数重载中，括号初始化会与"),s("code",null,"std::initializer_list"),l("参数匹配，即使其他构造函数时更好的选择")]),s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"Widget")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"public"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#82AAFF"}},"Widget"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"i"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#C792EA"}},"double"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"d"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#82AAFF"}},"Widget"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"initializer_list"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"bool"),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"il"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"};")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Widget w"),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"5.0"),s("span",{style:{color:"#89DDFF"}},"};")])])])]),s("p",null,"上述代码会匹配initializer_list参数的构造函数，而同时由于括号初始化禁止变窄转换，编译会失败")]),s("li",null,[s("p",null,"在模板类中选择使用小括号初始化或花括号初始化创建对象是一个挑战"),s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"vector"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"a"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"20"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 10个20")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#A6ACCD"}},"vector"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}}," b"),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"20"),s("span",{style:{color:"#89DDFF"}},"};"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 10和20")])])])])])],-1),X={id:"条款8-优先考虑nullptr而非0和null",tabindex:"-1"},Y={id:"条款9-优先考虑别名声明而非typedefs",tabindex:"-1"},ss=s("ul",null,[s("li",null,[s("p",null,"typedef不支持模板化，但是别名声明支持")]),s("li",null,[s("p",null,"别名模板避免了使用::type后缀，同时也就省去了typename的声明"),s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"struct"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"MyAllocList")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#F78C6C"}},"typedef"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#F07178"}},"list"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#F07178"}},"T"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," MyAlloc"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#F07178"}},"T"),s("span",{style:{color:"#89DDFF"}},">>"),s("span",{style:{color:"#F07178"}}," type"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"};")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"MyAllocList"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#89DDFF"}},">::"),s("span",{style:{color:"#A6ACCD"}},"type lw"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 在模板中还需要加上typename")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"Widget")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"MyAllocList"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">::"),s("span",{style:{color:"#FFCB6B"}},"type"),s("span",{style:{color:"#F07178"}}," list"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"};")])])])]),s("p",null,"可直接使用using"),s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"using"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"MyAllocList"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"list"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"MyAlloc"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">>;")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"MyAllocList"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#A6ACCD"}},"Widget"),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}}," lw"),s("span",{style:{color:"#89DDFF"}},";")])])])])])],-1),ls={id:"条款10-优先考虑限域枚举而非未限域枚举",tabindex:"-1"},os={id:"条款11-优先考虑使用deleted函数而非使用未定义的私有声明",tabindex:"-1"},es=s("ul",null,[s("li",null,"比起声明函数private但不定义，使用deleted函数更好"),s("li",null,"任何函数都能delete，包括非成员函数和模板示例")],-1),as={id:"条例12-使用override声明重载函数",tabindex:"-1"},ns={id:"条款13-优先考虑const-iterator而非iterator",tabindex:"-1"},ts={id:"条款14-如果函数不抛出异常请使用noexcept",tabindex:"-1"},cs={id:"条款15-尽可能的使用constexpr",tabindex:"-1"},ps=s("ul",null,[s("li",null,[s("p",null,"constexpr对象是const，它的值在编译期可知。但不是所有const对象都是constexpr"),s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," a"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," b "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," a"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"constexpr"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," c "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," b"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 错误，b的值编译期不可知")])])])])]),s("li",null,[s("p",null,"当传递编译期可知的值时，constexpr函数可以产出编译期可知的结果"),s("blockquote",null,[s("p",null,"constexpr函数的实参在编译期可知时，其结果将在编译期计算"),s("p",null,"constexpr函数被编译期不可知值调用时，他就像普通函数一样，在运行时计算")])])],-1),rs={id:"条款16-让const成员函数线程安全",tabindex:"-1"},Fs={id:"条款17-理解特殊成员函数的生成",tabindex:"-1"},ys={id:"chapter-4-smart-pointers",tabindex:"-1"},Ds={id:"条款18-对于独占资源使用std-unique-ptr",tabindex:"-1"},is=s("ul",null,[s("li",null,[s("p",null,[l("默认情况，资源销毁通过delete，但支持自定义的delete函数。而有状态的删除器和函数指针会增加 "),s("code",null,"std::unique_ptr"),l("的大小")]),s("blockquote",null,[s("p",null,"有状态是指有状态对象，就是有数据对象，可以保持数据，是非线程安全的"),s("p",null,"无状态就是一次操作，不能保存数据"),s("p",null,[s("s",null,"可能是这样的")])])]),s("li",null,[s("p",null,[l("将"),s("code",null,"std::unique_ptr"),l("转化为"),s("code",null,"std::shared_ptr"),l("是简单的")])])],-1),Cs={id:"条款19-对于共享资源使用std-shared-ptr",tabindex:"-1"},As=s("ul",null,[s("li",null,[s("code",null,"std::shared_ptr"),l("大小是原始指针的两倍，内部包含一个指向资源的原始指针，一个指向引用计数 的指针(指向控制块，控制块包含引用计数)")]),s("li",null,"引用计数必须动态分配"),s("li",null,"递增递减引用计数必须是原子性的")],-1),ds=s("p",null,[s("img",{src:"https://starrobe.oss-cn-beijing.aliyuncs.com/blog/shared_ptr.png",alt:"share_ptr"})],-1),hs=s("p",null,[l("如果通过原始指针构造"),s("code",null,"shared_ptr"),l("，需要直接传递new的结果")],-1),us=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"shared_ptr"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"sp"),s("span",{style:{color:"#89DDFF"}},"(new"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"Widget"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"Widget"),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}}," pw "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"new"),s("span",{style:{color:"#A6ACCD"}}," Widget"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 会创建两个控制块，当spw1释放后，spw2会重复释放")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"shared_ptr"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"spw1"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"pw"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"shared_ptr"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"spw2"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"pw"),s("span",{style:{color:"#89DDFF"}},");")])])])],-1),Bs=s("p",null,[l("当需要在类内部通过"),s("code",null,"this"),l("构造"),s("code",null,"shared_ptr"),l("时，需要使用"),s("code",null,"share_from_this()")],-1),_s=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#A6ACCD"}},"vector"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#A6ACCD"}},"shared_ptr"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#A6ACCD"}},"Widget"),s("span",{style:{color:"#89DDFF"}},">>"),s("span",{style:{color:"#A6ACCD"}}," widgets"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"process"),s("span",{style:{color:"#89DDFF"}},"()"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"  // 会创建单独的控制块，造成重复释放")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  widgets"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"emplace_back"),s("span",{style:{color:"#89DDFF"}},"(this);")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),ms=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#C792EA"}},"public"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"enable_shared_from_this"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"public"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#82AAFF"}},"process"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"};")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"process"),s("span",{style:{color:"#89DDFF"}},"()"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  widgets"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"emplace_back"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"share_from_this"),s("span",{style:{color:"#89DDFF"}},"());")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),fs={id:"条款20-当std-shared-ptr可能悬空时使用std-weak-ptr",tabindex:"-1"},Es={id:"条款21-优先考虑使用std-make-unique和std-make-shared而非new",tabindex:"-1"},gs=s("p",null,[s("code",null,"std::make_shared"),l("是C++11标准，但"),s("code",null,"std::make_unique"),l("在C++14，但可自己实现基础版本的"),s("code",null,"std::make_unique")],-1),vs=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#89DDFF"}},"..."),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"Ts"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"unique_ptr"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"make_unique"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"Ts"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#89DDFF"}},"..."),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"params"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"unique_ptr"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">(new"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"T"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"forward"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"Ts"),s("span",{style:{color:"#89DDFF"}},">("),s("span",{style:{color:"#A6ACCD"}},"params"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#A6ACCD"}},"..."),s("span",{style:{color:"#89DDFF"}},"));")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),bs=s("p",null,[l("控制块还有第二个引用计数"),s("code",null,"weak_count"),l("，只要"),s("code",null,"std::weak_ptr"),l("引用一个控制块即"),s("code",null,"weak_count"),l("大于零， 该控制块就必须存在。")],-1),Ts=s("p",null,[l("使用"),s("code",null,"make_shared"),l("创建对象时，对象销毁和释放内存之间会出现延迟")],-1),ks=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"auto"),s("span",{style:{color:"#A6ACCD"}}," pBig "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"make_shared"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"BigType"),s("span",{style:{color:"#89DDFF"}},">();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"..."),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 创建std::shared_ptr和std::weak_ptr指向对象")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"..."),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 当最后一个std::shared_ptr销毁，但std::weak_ptr还在")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 此时，先前分配给对象以及控制块的内存还未释放")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"..."),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 最后一个std::weak_ptr销毁")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 控制块和对象内存释放")])])])],-1),ws=s("p",null,[l("直接使用new，一旦最后一个"),s("code",null,"shared_ptr"),l("被销毁，对象的内存就会释放")],-1),xs=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"auto"),s("span",{style:{color:"#A6ACCD"}}," pBig "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"shared_ptr"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"BigType"),s("span",{style:{color:"#89DDFF"}},">(new"),s("span",{style:{color:"#A6ACCD"}}," BigType"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"..."),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 创建std::shared_ptr和std::weak_ptr指向对象")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"..."),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 当最后一个std::shared_ptr销毁，但std::weak_ptr还在")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 此时，对象销毁，分配给对象的内存释放")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"..."),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 最后一个std::weak_ptr销毁")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 控制块的内存释放")])])])],-1),Ps={id:"条款22-当使用pimpl惯用法-请在实现文件中定义特殊成员函数",tabindex:"-1"},Ws=s("p",null,'Pimpl是"指向实现的指针"，通过将类的实现细节放在一个单独的实现类当中，类通过private指针类来访问实现类',-1),Rs=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// widget.h")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"#include"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C3E88D"}},"memory"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"Widget")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"public"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#82AAFF"}},"Widget"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#82AAFF"}},"~Widget"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#82AAFF"}},"Widget"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#C792EA"}},"&"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#C792EA"}},"&"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"operator"),s("span",{style:{color:"#FFCB6B"}},"="),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#C792EA"}},"&"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#82AAFF"}},"Widget"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#C792EA"}},"&"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"operator"),s("span",{style:{color:"#FFCB6B"}},"="),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"private"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#C792EA"}},"struct"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"Impl"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#F07178"}},"unique_ptr"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#F07178"}},"Impl"),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#F07178"}}," pImpl"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"};")])])])],-1),Is=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// widget.cpp")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"#include"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"widget.h"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"struct"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#F07178"}},"::"),s("span",{style:{color:"#FFCB6B"}},"Impl")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#F07178"}}," x"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," y"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"};")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"Widget"),s("span",{style:{color:"#89DDFF"}},"()"),s("span",{style:{color:"#A6ACCD"}},": "),s("span",{style:{color:"#82AAFF"}},"pImpl"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"make_unique"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"Impl"),s("span",{style:{color:"#89DDFF"}},">())"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#89DDFF"}},"::~"),s("span",{style:{color:"#82AAFF"}},"Widget"),s("span",{style:{color:"#89DDFF"}},"()"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"default"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"Widget"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#A6ACCD"}}," Widget"),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#A6ACCD"}}," rhs"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#A6ACCD"}},": "),s("span",{style:{color:"#82AAFF"}},"pImpl"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"make_unique"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"Impl"),s("span",{style:{color:"#89DDFF"}},">(*"),s("span",{style:{color:"#A6ACCD"}},"rhs"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"pImpl"),s("span",{style:{color:"#89DDFF"}},"))"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#C792EA"}},"&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#F78C6C"}},"operator"),s("span",{style:{color:"#FFCB6B"}},"="),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#C792EA"}},"&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"rhs"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}},"pImpl "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#A6ACCD"}},"rhs"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#A6ACCD"}},"pImpl"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"*this;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"Widget"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"Widget"),s("span",{style:{color:"#89DDFF"}},"&&"),s("span",{style:{color:"#A6ACCD"}}," rhs"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"default"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#C792EA"}},"&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"operator"),s("span",{style:{color:"#FFCB6B"}},"="),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"rhs"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"default"),s("span",{style:{color:"#89DDFF"}},";")])])])],-1),qs=s("p",null,"当一个Widget对象销毁时",-1),Ms=s("ol",null,[s("li",null,"会调用析构函数销毁pImpl"),s("li",null,"pImpl调用默认删除器"),s("li",null,"默认删除器使用delete释放原始指针所指向的空间")],-1),Ns=s("p",null,[l("在默认删除器中，delete之前会调用"),s("code",null,"static_assert"),l("来确保原始指针指向的类型不是一个未完成类型， 因此应该在调用析构函数之前，让Impl为完整类型。即，将析构函数的定义写在Impl的定义下方")],-1),Hs=s("p",null,"对于移动操作，需要销毁原来的对象，因此与析构相同",-1),Ls=s("blockquote",null,[s("p",null,[l("对于"),s("code",null,"std::shared_ptr"),l("来说，删除器的类型不是智能指针的一部分，在特殊函数(析构，移动)调用时， 不需要指向的对象是完成类型")])],-1),zs={id:"chapter-5-rvalue-references-move-semantics-and-perfect-forwarding",tabindex:"-1"},$s=s("blockquote",null,[s("p",null,[s("strong",null,"参数"),l("(parameter)永远是"),s("strong",null,"左值"),l("(LValue)，即便它的类型是一个右值引用")])],-1),Ss={id:"条款23-理解std-move和std-forward",tabindex:"-1"},js=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"remove_reference"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">::"),s("span",{style:{color:"#FFCB6B"}},"type"),s("span",{style:{color:"#89DDFF"}},"&&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"move"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"T"),s("span",{style:{color:"#89DDFF"}},"&&"),s("span",{style:{color:"#A6ACCD"}}," param"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"static_cast<"),s("span",{style:{color:"#FFCB6B"}},"remove_reference"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">::"),s("span",{style:{color:"#F07178"}},"type"),s("span",{style:{color:"#89DDFF"}},"&&>("),s("span",{style:{color:"#F07178"}},"param"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),Vs=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Foo"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"param"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#82AAFF"}},"Test"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"forward"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">("),s("span",{style:{color:"#A6ACCD"}},"param"),s("span",{style:{color:"#89DDFF"}},"))")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),Us=s("p",null,"在对通用引用转发时，实参无论是左值还是右值，都会被T&&接受，但当接收右值时，param的类型为 右值引用，但此时param为一个左值，因此forward匹配的仍然是形参为左值引用的重载",-1),Os=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"forward"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"remove_reference"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">::"),s("span",{style:{color:"#FFCB6B"}},"type"),s("span",{style:{color:"#C792EA"}},"&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"param"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"static_cast<"),s("span",{style:{color:"#A6ACCD"}},"T"),s("span",{style:{color:"#89DDFF"}},"&&>("),s("span",{style:{color:"#A6ACCD"}},"param"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),Gs=s("p",null,"该重载只有在传入右值的时候才会匹配，并且返回右值",-1),Js=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"forward"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"remove_reference"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">::"),s("span",{style:{color:"#FFCB6B"}},"type"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"param"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"static_cast<"),s("span",{style:{color:"#A6ACCD"}},"T"),s("span",{style:{color:"#89DDFF"}},"&&>("),s("span",{style:{color:"#A6ACCD"}},"param"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),Zs={id:"条款24-区分通用引用与右值引用",tabindex:"-1"},Ks=s("ul",null,[s("li",null,[s("p",null,"如果一个函数模板参数的类型为T&&，并且T需要被推导得知，或者如果一个对象被声明为auto&&，这个 参数或者对象就是一个通用引用")]),s("li",null,[s("p",null,"如果类型声明的形式不是标准的type&&，或者如果类型推导没有发生，那么type&&代表一个右值引用"),s("blockquote",null,[s("p",null,"模板里面的函数参数类型为T&&，并不一定会发生类型推导")]),s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"vector")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"public"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#82AAFF"}},"push_back"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"param"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"};")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#A6ACCD"}},"vector"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#A6ACCD"}},"Widget"),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}}," v"),s("span",{style:{color:"#89DDFF"}},";")])])])]),s("p",null,"实例化vector时就确定了push_back的声明")])],-1),Qs={id:"条款25-对右值引用使用std-move-对通用引用使用std-forward",tabindex:"-1"},Xs=s("p",null,"按值返回的函数，并且返回值绑定到右值引用或通用引用上，需要对返回值的引用使用std::move或者 std::forward",-1),Ys=s("p",null,"lhs为左值，返回lhs会拷贝到返回值的内存空间，而如果lhs支持移动，使用std::move效率更高",-1),sl=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Matrix"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"operator"),s("span",{style:{color:"#FFCB6B"}},"+"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"Matrix"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"lhs"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"Matrix"),s("span",{style:{color:"#C792EA"}},"&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"rhs"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  lhs "),s("span",{style:{color:"#89DDFF"}},"+="),s("span",{style:{color:"#A6ACCD"}}," rhs"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"  // return lhs;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"move"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"lhs"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),ll=s("p",null,"如果不带std::forward，frac类型为右值引用时，frac仍然为左值，return仍需要拷贝",-1),ol=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Fraction"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"reduceAndCopy"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"frac"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"forward"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">("),s("span",{style:{color:"#A6ACCD"}},"frac"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),el=s("p",null,"C++标准存在返回值优化(RVO)，即直接在返回值的内存中构造，来避免复制，也称为Copy elision",-1),al=s("blockquote",null,[s("p",null,"具名返回值优化NRVO，返回具名的局部变量")],-1),nl=s("p",null,"返回值优化的条件：1.局部变量与返回值类型相同；2.局部变量就是返回值",-1),tl=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"makeWidget"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  Widget w"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"  // 不满足要求2，std::move是对w的引用，而非局部变量，无法优化")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"  // return std::move(w);")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#A6ACCD"}}," w"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),cl=s("p",null,"如果满足RVO的条件，但编译器选择不执行复制忽略，则必须将返回对象视为右值。标准要求RVO， 忽略复制或者将std::move隐式应用于返回的本地对象",-1),pl=s("p",null,[l("因此上述代码中，"),s("code",null,"return w;"),l("如果不执行复制忽略的优化，就会自动将std::move隐式执行")],-1),rl=s("p",null,"按值传递参数的情况于此类似，它们没有RVO的资格，但是如果作为返回值，编译器会将其视为右值",-1),Fl=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"makeWidget"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"w"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#A6ACCD"}}," w"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"  // 实际上，编译器的代码为")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"  // return std::move(w);")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),yl={id:"条款26-避免在通用引用上重载",tabindex:"-1"},Dl=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"Person")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"public"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#82AAFF"}},"Person"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"n"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#82AAFF"}},"name"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"forward"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">("),s("span",{style:{color:"#F07178"}},"n"),s("span",{style:{color:"#89DDFF"}},"))"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"{}"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 通过名字构造")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#82AAFF"}},"Person"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"id"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}},"                             // 通过id构造")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#82AAFF"}},"Person"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"Person"),s("span",{style:{color:"#C792EA"}},"&"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#82AAFF"}},"Person"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"Person"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"};")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Person"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"p1"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"Nancy"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Person"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"p2"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"p1"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}},"  // 调用的是通用引用的构造函数，而非拷贝构造")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"Person"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"p3"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"aaa"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"Person"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"p4"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"p3"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}},"  // 正常匹配拷贝构造")])])])],-1),il=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"Person"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"SpecialPerson"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#C792EA"}},"public"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"Person")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"public"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"  // 调用的都是Person的通用引用的构造函数")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#82AAFF"}},"SpecialPerson"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"SpecialPerson"),s("span",{style:{color:"#C792EA"}},"&"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"rhs"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#82AAFF"}},"Person"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"rhs"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"{}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#82AAFF"}},"SpecialPerson"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"SpecialPerson"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"rhs"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#82AAFF"}},"Person"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"move"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"rhs"),s("span",{style:{color:"#89DDFF"}},"))"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"{}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"};")])])])],-1),Cl=s("p",null,"完美转发构造函数是糟糕的实现，因为对于non-const左值不会调用构造函数而是完美转发构造， 而且会劫持派生类对于基类的拷贝和移动构造",-1),Al={id:"条款27-熟悉通用引用重载的替代方法",tabindex:"-1"},dl={id:"abandon-overloading",tabindex:"-1"},hl=s("p",null,"重载虽然可以区分std::string与int，而采用不同的处理方式，但如果需要类型转换时，可能不能 起到期望的结果",-1),ul=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"LogAndAdd"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"name"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  names"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"emplace"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"forward"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">("),s("span",{style:{color:"#A6ACCD"}},"name"),s("span",{style:{color:"#89DDFF"}},"));")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"LogAndAdd"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"id"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  names"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"emplace"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"GetNameById"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"id"),s("span",{style:{color:"#89DDFF"}},"));")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),Bl=s("p",null,"此时如果实参类型为short，模板函数的优先级大于形参为int的重载",-1),_l=s("p",null,"因此可以不使用重载，分别改函数名为logAndAddName和logAndAddId，但是如果是构造函数的话， 就无法使用该方法",-1),ml={id:"pass-by-const-t",tabindex:"-1"},fl={id:"pass-by-value",tabindex:"-1"},El={id:"use-tag-dispatch",tabindex:"-1"},gl=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"LogAndAdd"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"name"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#82AAFF"}},"LogAndAddImpl"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"forward"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">("),s("span",{style:{color:"#A6ACCD"}},"name"),s("span",{style:{color:"#89DDFF"}},"),"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"is_integral"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"remove_reference_t"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">>());")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"LogAndAddImpl"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"name"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"false_type"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"LogAndAddImpl"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"id"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"true_type"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),vl={id:"constraining-templates-that-take-universal-references",tabindex:"-1"},bl=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"Person")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"public"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"enable_if_t"),s("span",{style:{color:"#89DDFF"}},"<")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"    "),s("span",{style:{color:"#89DDFF"}},"!"),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"is_base_of_v"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"Person"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"decay_t"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">>")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"    "),s("span",{style:{color:"#89DDFF"}},"&&")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"    "),s("span",{style:{color:"#89DDFF"}},"!"),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"is_integral_v"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"remove_reference"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">>")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"    "),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#82AAFF"}},"Person"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"n"),s("span",{style:{color:"#89DDFF"}},"):"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#82AAFF"}},"name"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"forward"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">("),s("span",{style:{color:"#F07178"}},"n"),s("span",{style:{color:"#89DDFF"}},"))"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#F07178"}},"..."),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#82AAFF"}},"Person"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"id"),s("span",{style:{color:"#89DDFF"}},"):"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#82AAFF"}},"name"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"GetNameById"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"id"),s("span",{style:{color:"#89DDFF"}},"))"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#F07178"}},"..."),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"};")])])])],-1),Tl={id:"trade-offs",tabindex:"-1"},kl=s("p",null,[l('使用Person(u"hello")，其中实参为'),s("code",null,"const char16_t"),l("，而不是char，此时调用的是通用引用的构造函数， 但其无法转换为std::string，因此需要提示错误信息")],-1),wl=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"static_assert"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"is_constructible"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"string"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">::"),s("span",{style:{color:"#A6ACCD"}},"value"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"message"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},");")])])])],-1),xl={id:"条款28-理解引用折叠",tabindex:"-1"},Pl={id:"条款29-移动语义的缺点",tabindex:"-1"},Wl={id:"条款30-熟悉完美转发的失败情况",tabindex:"-1"},Rl=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#89DDFF"}},"..."),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"Ts"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"fwd"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"Ts"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#89DDFF"}},"..."),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"params"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"forward"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"Ts"),s("span",{style:{color:"#89DDFF"}},">("),s("span",{style:{color:"#A6ACCD"}},"params"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#A6ACCD"}},"..."),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),Il={id:"braced-initializers",tabindex:"-1"},ql=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"vector"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#C792EA"}},"&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"v"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"{"),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#A6ACCD"}},"}"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}},"  // 隐式转换为std::vector<int>")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"fwd"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"{"),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#A6ACCD"}},"}"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 无法编译")])])])],-1),Ml=s("p",null,[l("条款2中提到，在对fwd的调用中的{1, 2, 3}进行类型推导时，由于fwd的参数没有声明为"),s("code",null,"std::initializer_list"),l("， 无法匹配。但auto却可以通过braced initializer推导出"),s("code",null,"std::initializer_list")],-1),Nl=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"auto"),s("span",{style:{color:"#A6ACCD"}}," il "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#89DDFF"}},"};"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // il为std::initializer_list<int>类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"fwd"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"il"),s("span",{style:{color:"#89DDFF"}},");")])])])],-1),Hl={id:"_0或者null作为空指针",tabindex:"-1"},Ll={id:"仅声明的整数静态const数据成员",tabindex:"-1"},zl=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"Widget")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"public"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#C792EA"}},"static"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#C792EA"}},"size_t"),s("span",{style:{color:"#F07178"}}," Minvals "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"28"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"};")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#C792EA"}},"size_t"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"val"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"fwd"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#A6ACCD"}},"Minvals"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}},"  // 通过编译，但由于Minvals没有定义，无法链接")])])])],-1),$l=s("p",null,[l("fwd的参数是通用引用，底层中，引用与指针是一样的，即通过引用传递Minvals实际上与使用指针转递 Minvals一样。但是static const在类中仅仅只是声明，而声明是不会分配内存的，即无法被指针指向。"),s("br"),l(" 从而，通过引用传递整型static const数据成员，必须定义它们")],-1),Sl=s("blockquote",null,[s("p",null,"只是要求定义，并不是强制，因为有的编译器允许未定义的情况")],-1),jl={id:"重载的函数名称和模板名称",tabindex:"-1"},Vl=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Foo"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"x"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Foo"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"x"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"y"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"(*)("),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#89DDFF"}},"));")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"fwd"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"Foo"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 无法判断选择哪个Foo")])])])],-1),Ul=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Foo"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"param"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#A6ACCD"}},"..."),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"fwd"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"Foo"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#676E95","font-style":"italic"}}," // 无法判断那个Foo")])])])],-1),Ol={id:"位域",tabindex:"-1"},Gl={id:"chapter-6-lambda表达式",tabindex:"-1"},Jl={id:"条款31-避免使用默认捕获模式",tabindex:"-1"},Zl=s("p",null,"闭包只会对lambda被创建时所在的作用域里的非静态局部变量生效，因此不能捕获成员变量",-1),Kl=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"Widget")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"private"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#F07178"}}," m_value"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"public"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#82AAFF"}},"Test"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"    "),s("span",{style:{color:"#C792EA"}},"auto"),s("span",{style:{color:"#F07178"}}," f "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"[=]()"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#F07178"}}," m_value"),s("span",{style:{color:"#89DDFF"}},";};")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"};")])])])],-1),Ql=s("p",null,[l("在成员函数类，相当于隐式捕获this，lambda中的"),s("code",null,"m_value"),l("是"),s("code",null,"this->m_value")],-1),Xl=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"Test"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#C792EA"}},"auto"),s("span",{style:{color:"#A6ACCD"}}," current_object_ptr "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"this;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#C792EA"}},"auto"),s("span",{style:{color:"#A6ACCD"}}," f "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"current_object_ptr"),s("span",{style:{color:"#89DDFF"}},"](){"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#A6ACCD"}}," current_object_ptr"),s("span",{style:{color:"#89DDFF"}},"->"),s("span",{style:{color:"#A6ACCD"}},"m_value"),s("span",{style:{color:"#89DDFF"}},";};")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),Yl=s("p",null,"定义在全局空间或者指定命名空间的全局变量，或者是一个声明为static的类内或文件内的成员。 这些对象也能在lambda中使用，但它们不能被捕获",-1),so=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"static"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#C792EA"}},"int"),s("span",{style:{color:"#A6ACCD"}}," a "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"auto"),s("span",{style:{color:"#A6ACCD"}}," f "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"[=](){"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#A6ACCD"}}," a"),s("span",{style:{color:"#89DDFF"}},";};")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"++"),s("span",{style:{color:"#A6ACCD"}},"a"),s("span",{style:{color:"#89DDFF"}},";")])])])],-1),lo=s("p",null,"虽然按值捕获，但并不能捕获a，在调用f()时，返回的是++a后的值，相当于是按引用捕获。 因此，在开始时就应该避免使用默认的按值捕获模式，以免误解",-1),oo={id:"条款32-使用初始化捕获来移动对象到闭包中",tabindex:"-1"},eo=s("p",null,"C++ 14中可使用初始化捕获",-1),ao=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#F07178"}},"；")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"autp pw = std::"),s("span",{style:{color:"#FFCB6B"}},"make_unique"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#F07178"}},"()"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"auto"),s("span",{style:{color:"#A6ACCD"}}," func "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"pw"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"move"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"pw"),s("span",{style:{color:"#89DDFF"}},")]"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#A6ACCD"}},"..."),s("span",{style:{color:"#89DDFF"}},"};")])])])],-1),no=s("p",null,"C++ 11中可替代方法",-1),to=s("ul",null,[s("li",null,[s("p",null,"闭包类"),s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"Entity")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"public"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#C792EA"}},"explicit"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#82AAFF"}},"Entity"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"unique_ptr"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"ptr"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#82AAFF"}},"pw"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"move"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"ptr"),s("span",{style:{color:"#89DDFF"}},"))"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"{}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#C792EA"}},"bool"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"operator"),s("span",{style:{color:"#FFCB6B"}},"()"),s("span",{style:{color:"#89DDFF"}},"()"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#C792EA"}},"const")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"    ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"private"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#F07178"}},"unique_ptr pw"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"};")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"auto"),s("span",{style:{color:"#A6ACCD"}}," func "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Entity"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"make_unique"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#89DDFF"}},">());")])])])])]),s("li",null,[s("p",null,"std::bind"),s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"using"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"UniquePtr"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"unique_ptr"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#89DDFF"}},">;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"UniquePtr pw "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"make_unique"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"Widget"),s("span",{style:{color:"#89DDFF"}},">();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"auto"),s("span",{style:{color:"#A6ACCD"}}," func "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"bind"),s("span",{style:{color:"#89DDFF"}},"([]("),s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"UniquePtr"),s("span",{style:{color:"#C792EA"}},"&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"ptr"),s("span",{style:{color:"#89DDFF"}},"){"),s("span",{style:{color:"#A6ACCD"}},"..."),s("span",{style:{color:"#89DDFF"}},"},"),s("span",{style:{color:"#A6ACCD"}}," pw"),s("span",{style:{color:"#89DDFF"}},");")])])])])])],-1),co={id:"条款33-对于std-forward的auto-形参使用decltype",tabindex:"-1"},po=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"auto"),s("span",{style:{color:"#A6ACCD"}}," f "),s("span",{style:{color:"#89DDFF"}},"=")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF"}},"[]("),s("span",{style:{color:"#C792EA"}},"auto&&"),s("span",{style:{color:"#89DDFF"}},"..."),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"params"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"func"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"normailized"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"forward"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"decltype"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"params"),s("span",{style:{color:"#89DDFF"}},")>("),s("span",{style:{color:"#A6ACCD"}},"params"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#A6ACCD"}},"..."),s("span",{style:{color:"#89DDFF"}},"));")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),ro={id:"条款34-考虑lambda表达式而非std-bind",tabindex:"-1"},Fo=s("ul",null,[s("li",null,"与使用std::bind相比，Lambda更易读，更具有表达力并且可能更高效"),s("li",null,"只有在C++11中，std::bind可能对实现移动捕获或使用模板化函数调用运算符来绑定对象时会很有用")],-1),yo={id:"chapter-7-并发api",tabindex:"-1"},Do={id:"条款35-优先基于任务编程而不是基于线程",tabindex:"-1"},io=s("ul",null,[s("li",null,[s("code",null,"std::thread"),l("不能直接访问异步执行的结果，如果执行函数有异常抛出，代码会终止执行")]),s("li",null,"基于线程的编程方式关于解决资源超限，负载均衡的方案移植性不佳"),s("li",null,[s("code",null,"std::async"),l("会默认解决上面问题")])],-1),Co={id:"条款36-确保在异步为必须时-才指定std-launch-async",tabindex:"-1"},Ao=s("p",null,[l("使用"),s("code",null,"wait_for()"),l(" or "),s("code",null,"wait_until()"),l("时考虑deferred状态")],-1),ho=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Foo"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"auto"),s("span",{style:{color:"#A6ACCD"}}," f "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"async"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"Foo"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 当std::async使用std::launch::deferred时，会死循环")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"while"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"f"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"wait_for"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F78C6C"}},"1s"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"!="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"future_status"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#A6ACCD"}},"ready"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"  // ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),uo=s("p",null,"可以先判断一下是否为deferred",-1),Bo=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"f"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"wait_for"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F78C6C"}},"0s"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"future_status"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#A6ACCD"}},"deferred"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"  // ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"else"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"while"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"f"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"wait_for"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F78C6C"}},"1s"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"!="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"future_status"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#F07178"}},"ready"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"  // ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),_o={id:"条款37-从各个方面使得std-threads-unjoinable",tabindex:"-1"},mo=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"ThreadRAII"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"public"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#C792EA"}},"enum"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"DtorAction"),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#A6ACCD"}},"join"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#A6ACCD"}},"detch"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"};")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#82AAFF"}},"ThreadRAII"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"thread"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"t"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"DtorAction"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"a"),s("span",{style:{color:"#89DDFF"}},"):"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#82AAFF"}},"action"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"a"),s("span",{style:{color:"#89DDFF"}},"),"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#82AAFF"}},"t"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"move"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"t"),s("span",{style:{color:"#89DDFF"}},"))"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"{}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#82AAFF"}},"~ThreadRAII"),s("span",{style:{color:"#89DDFF"}},"()"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"t"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"joinable"),s("span",{style:{color:"#89DDFF"}},"())"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"      "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178"}},"action "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#FFCB6B"}},"DtorAction"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#F07178"}},"join"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"        "),s("span",{style:{color:"#A6ACCD"}},"t"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"join"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"      "),s("span",{style:{color:"#89DDFF"}},"}"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"else"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"        "),s("span",{style:{color:"#A6ACCD"}},"t"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"detach"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"      "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"    "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#82AAFF"}},"ThreadRAII"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"ThreadRAII"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"default"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#FFCB6B"}},"ThreadRAII"),s("span",{style:{color:"#C792EA"}},"&"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"operator"),s("span",{style:{color:"#FFCB6B"}},"="),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"ThreadRAII"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#F78C6C"}},"default"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"thread"),s("span",{style:{color:"#C792EA"}},"&"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#82AAFF"}},"get"),s("span",{style:{color:"#89DDFF"}},"()"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#F07178"}}," t"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#F07178"}}," "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"private"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  DtorAction action"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"  "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#F07178"}},"thread t"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"};")])])])],-1),fo=s("p",null,[l("析构时执行"),s("code",null,"join()"),l("可能导致性能异常，执行"),s("code",null,"detach()"),l("可能导致bug("),s("strong",null,"详情见原书"),l(")， 适当的解决方案是中断线程，详情见《C++ Concurrency in Action》9.2部分")],-1),Eo={id:"条款38-关注不同线程句柄析构行为",tabindex:"-1"},go=s("blockquote",null,[s("p",null,[l("promise搭配future使用时，结果存储在"),s("strong",null,"共享状态"),l("*(shared state)中，而共享状态通常 是基于堆的对象")])],-1),vo=s("ul",null,[s("li",null,[s("code",null,"future"),l("的正常析构行为就是销毁"),s("code",null,"future"),l("本身的成员数据")]),s("li",null,[l("最后一个引用"),s("code",null,"std::async"),l("创建共享状态的"),s("code",null,"future"),l("析构函数会在任务结束前block")])],-1),bo={id:"条款39-对于一次性事件通讯考虑使用无返回future",tabindex:"-1"},To=s("p",null,"一个任务通知另一个异步任务执行的方法",-1),ko=s("ul",null,[s("li",null,[s("p",null,"条件变量"),s("p",null,[l("条件变量"),s("code",null,"wait()"),l("语句存在虚假唤醒，即使条件变量没有被通知，也可能被唤醒， 可使用Lambda解决")]),s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"cv"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"wait"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"lk"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"[]{"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#A6ACCD"}}," whether the event has occurred"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"});")])])])])]),s("li",null,[s("p",null,"共享的boolean标志"),s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Foo1"),s("span",{style:{color:"#89DDFF"}},"()"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#A6ACCD"}},"atomic"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"bool"),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"flag"),s("span",{style:{color:"#89DDFF"}},"(false);")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"  // ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  flag "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"true;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Foo2"),s("span",{style:{color:"#89DDFF"}},"()"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"  // ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"while"),s("span",{style:{color:"#89DDFF"}},"(!false);")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"  // ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])]),s("p",null,[l("无锁以及没有虚假唤醒，但是"),s("code",null,"Foo2()"),l("会一直占用CPU")])]),s("li",null,[s("p",null,"promise与future"),s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#A6ACCD"}},"promise"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}}," p"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Foo1"),s("span",{style:{color:"#89DDFF"}},"()"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"  // ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  p"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"set_value"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"Foo2"),s("span",{style:{color:"#89DDFF"}},"()"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"  // ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  p"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"get_future"),s("span",{style:{color:"#89DDFF"}},"()."),s("span",{style:{color:"#82AAFF"}},"wait"),s("span",{style:{color:"#89DDFF"}},"();")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"  // ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])]),s("p",null,[l("无锁，没有虚假唤醒，不会一直占用CPU，但"),s("code",null,"std::promise"),l("与"),s("code",null,"std::future"),l("间有共享 状态，并且共享状态是动态分配的，会有分配与释放的开销")]),s("p",null,[l("同时，"),s("code",null,"std::promise"),l("只能设置一次，即与"),s("code",null,"std::future"),l("之间的通信是一次性的")])])],-1),wo={id:"条款40-对于并发请使用std-atomic、volatile用于特殊内存区",tabindex:"-1"},xo=s("ul",null,[s("li",null,[s("code",null,"std::atomic"),l("用在并发程序中")]),s("li",null,[s("code",null,"volatile"),l("用于特殊内存的场景中，避免被编译器优化内存")])],-1),Po={id:"chapter-8-微调",tabindex:"-1"},Wo={id:"条款41-如果参数可拷贝并且移动操作开销很低-总是考虑直接按值传递",tabindex:"-1"},Ro=s("div",{class:"language-cpp"},[s("span",{class:"copy"}),s("pre",{class:"shiki material-theme-palenight"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#A6ACCD"}},"vector"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#A6ACCD"}},"string"),s("span",{style:{color:"#89DDFF"}},">"),s("span",{style:{color:"#A6ACCD"}}," names"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 1.重载 左值会由一次拷贝，右值由一次移动")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"AddName"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"const"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"string"),s("span",{style:{color:"#C792EA"}},"&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"newName"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  names"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"push_back"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"newName"),s("span",{style:{color:"#89DDFF"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"AddName"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"string"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"newName"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  names"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"push_back"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"move"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"newName"),s("span",{style:{color:"#89DDFF"}},"));")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 2.通用模板 与重载开销相同")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"template"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#C792EA"}},"typename"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"AddName"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#C792EA"}},"&&"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"newName"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  names"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"push_back"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"forward"),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#FFCB6B"}},"T"),s("span",{style:{color:"#89DDFF"}},">("),s("span",{style:{color:"#A6ACCD"}},"newName"),s("span",{style:{color:"#89DDFF"}},"));")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#676E95","font-style":"italic"}},"// 3.按值传递 左值参数，一次拷贝一次移动，右值参数，两次拷贝")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"void"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#82AAFF"}},"AddName"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#FFCB6B"}},"string"),s("span",{style:{color:"#A6ACCD"}}," "),s("span",{style:{color:"#A6ACCD","font-style":"italic"}},"newName"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#A6ACCD"}},"  names"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"push_back"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#FFCB6B"}},"std"),s("span",{style:{color:"#89DDFF"}},"::"),s("span",{style:{color:"#82AAFF"}},"move"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#A6ACCD"}},"newName"),s("span",{style:{color:"#89DDFF"}},"));")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])])],-1),Io=s("p",null,[s("s",null,"后面没看懂。。。")],-1),qo=s("ul",null,[s("li",null,"对于可复制，移动开销低，而且无条件复制的参数，按值传递效率基本与按引用传递效率一致，而且 易于实现，生成更少的目标代码"),s("li",null,"通过拷贝构造拷贝参数，可能比通过赋值拷贝开销大的多"),s("li",null,"按值转递会引起切片问题，所说不适合基类类型的参数")],-1),Mo={id:"条款42-考虑使用emplacement代替insertion",tabindex:"-1"},No=s("p",null,[s("s",null,"也没怎么看懂")],-1),Ho=s("ul",null,[s("li",null,[s("p",null,"原则上，emplacement函数有时会比insertion函数高效，并且不会更差")]),s("li",null,[s("p",null,"实际上，当执行如下操作时，emplacement函数更快"),s("ol",null,[s("li",null,"值被构造到容器中，而不是直接赋值"),s("li",null,"传入的类型与容器类型不一致"),s("li",null,"容器不拒绝已经存在的重复值")])]),s("li",null,[s("p",null,"emplacement函数可能执行insertion函数拒绝的显示构造")])],-1);function Lo(n,zo,$o,So,p,jo){const e=d,r=F;return A(),C(r,{frontmatter:p.frontmatter,data:p.data},{"main-content-md":o(()=>[s("h3",u,[l("CHAPTER 1 Deducing Types "),a(e,{class:"header-anchor",href:"#chapter-1-deducing-types","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h4",B,[l("条款1 理解模板类型推导 "),a(e,{class:"header-anchor",href:"#条款1-理解模板类型推导","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),_,s("h5",m,[l("ParamType为指针或引用但不是通用引用 "),a(e,{class:"header-anchor",href:"#paramtype为指针或引用但不是通用引用","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),f,E,g,s("h5",v,[l("ParamType是通用引用 "),a(e,{class:"header-anchor",href:"#paramtype是通用引用","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),b,s("h5",T,[l("ParamType既不是指针也不是引用 "),a(e,{class:"header-anchor",href:"#paramtype既不是指针也不是引用","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),k,w,s("h5",x,[l("数组实参 "),a(e,{class:"header-anchor",href:"#数组实参","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),P,W,R,I,q,s("h5",M,[l("函数实参 "),a(e,{class:"header-anchor",href:"#函数实参","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),N,H,L,s("h4",z,[l("条款2 理解auto类型推导 "),a(e,{class:"header-anchor",href:"#item2","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),$,s("h4",S,[l("条款3 理解decltype "),a(e,{class:"header-anchor",href:"#条款3-理解decltype","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),j,s("h4",V,[l("条款4 学会查看类型推导结果 "),a(e,{class:"header-anchor",href:"#条款4-学会查看类型推导结果","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h3",U,[l("CHAPTER 2 auto "),a(e,{class:"header-anchor",href:"#chapter-2-auto","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h4",O,[l("条款5 优先考虑auto而非显示类型声明 "),a(e,{class:"header-anchor",href:"#条款5-优先考虑auto而非显示类型声明","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h4",G,[l("条款6 auto推导若非己愿，使用显示类型初始化惯用法 "),a(e,{class:"header-anchor",href:"#条款6-auto推导若非己愿-使用显示类型初始化惯用法","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),J,s("h3",Z,[l("CHAPTER 3 Moving to Modern C++ "),a(e,{class:"header-anchor",href:"#chapter-3-moving-to-modern-c","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h4",K,[l("条款7 区别使用()和{}创建对象 "),a(e,{class:"header-anchor",href:"#条款7-区别使用-和-创建对象","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Q,s("h4",X,[l("条款8 优先考虑nullptr而非0和NULL "),a(e,{class:"header-anchor",href:"#条款8-优先考虑nullptr而非0和null","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h4",Y,[l("条款9 优先考虑别名声明而非typedefs "),a(e,{class:"header-anchor",href:"#条款9-优先考虑别名声明而非typedefs","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),ss,s("h4",ls,[l("条款10 优先考虑限域枚举而非未限域枚举 "),a(e,{class:"header-anchor",href:"#条款10-优先考虑限域枚举而非未限域枚举","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h4",os,[l("条款11 优先考虑使用deleted函数而非使用未定义的私有声明 "),a(e,{class:"header-anchor",href:"#条款11-优先考虑使用deleted函数而非使用未定义的私有声明","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),es,s("h4",as,[l("条例12 使用override声明重载函数 "),a(e,{class:"header-anchor",href:"#条例12-使用override声明重载函数","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h4",ns,[l("条款13 优先考虑const_iterator而非iterator "),a(e,{class:"header-anchor",href:"#条款13-优先考虑const-iterator而非iterator","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h4",ts,[l("条款14 如果函数不抛出异常请使用noexcept "),a(e,{class:"header-anchor",href:"#条款14-如果函数不抛出异常请使用noexcept","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h4",cs,[l("条款15 尽可能的使用constexpr "),a(e,{class:"header-anchor",href:"#条款15-尽可能的使用constexpr","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),ps,s("h4",rs,[l("条款16 让const成员函数线程安全 "),a(e,{class:"header-anchor",href:"#条款16-让const成员函数线程安全","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h4",Fs,[l("条款17 理解特殊成员函数的生成 "),a(e,{class:"header-anchor",href:"#条款17-理解特殊成员函数的生成","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h3",ys,[l("CHAPTER 4 Smart pointers "),a(e,{class:"header-anchor",href:"#chapter-4-smart-pointers","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h4",Ds,[l("条款18 对于独占资源使用std::unique_ptr "),a(e,{class:"header-anchor",href:"#条款18-对于独占资源使用std-unique-ptr","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),is,s("h4",Cs,[l("条款19 对于共享资源使用std::shared_ptr "),a(e,{class:"header-anchor",href:"#条款19-对于共享资源使用std-shared-ptr","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),As,ds,hs,us,Bs,_s,ms,s("h4",fs,[l("条款20 当std::shared_ptr可能悬空时使用std::weak_ptr "),a(e,{class:"header-anchor",href:"#条款20-当std-shared-ptr可能悬空时使用std-weak-ptr","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h4",Es,[l("条款21 优先考虑使用std::make_unique和std::make_shared而非new "),a(e,{class:"header-anchor",href:"#条款21-优先考虑使用std-make-unique和std-make-shared而非new","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),gs,vs,bs,Ts,ks,ws,xs,s("h4",Ps,[l("条款22 当使用Pimpl惯用法，请在实现文件中定义特殊成员函数 "),a(e,{class:"header-anchor",href:"#条款22-当使用pimpl惯用法-请在实现文件中定义特殊成员函数","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Ws,Rs,Is,qs,Ms,Ns,Hs,Ls,s("h3",zs,[l("CHAPTER 5 RValue References, Move Semantics and Perfect Forwarding "),a(e,{class:"header-anchor",href:"#chapter-5-rvalue-references-move-semantics-and-perfect-forwarding","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),$s,s("h4",Ss,[l("条款23 理解std::move和std::forward "),a(e,{class:"header-anchor",href:"#条款23-理解std-move和std-forward","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),js,Vs,Us,Os,Gs,Js,s("h4",Zs,[l("条款24 区分通用引用与右值引用 "),a(e,{class:"header-anchor",href:"#条款24-区分通用引用与右值引用","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Ks,s("h4",Qs,[l("条款25 对右值引用使用std::move，对通用引用使用std::forward "),a(e,{class:"header-anchor",href:"#条款25-对右值引用使用std-move-对通用引用使用std-forward","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Xs,Ys,sl,ll,ol,el,al,nl,tl,cl,pl,rl,Fl,s("h4",yl,[l("条款26 避免在通用引用上重载 "),a(e,{class:"header-anchor",href:"#条款26-避免在通用引用上重载","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Dl,il,Cl,s("h4",Al,[l("条款27 熟悉通用引用重载的替代方法 "),a(e,{class:"header-anchor",href:"#条款27-熟悉通用引用重载的替代方法","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h5",dl,[l("Abandon overloading "),a(e,{class:"header-anchor",href:"#abandon-overloading","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),hl,ul,Bl,_l,s("h5",ml,[l("Pass by const T& "),a(e,{class:"header-anchor",href:"#pass-by-const-t","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h5",fl,[l("Pass by value "),a(e,{class:"header-anchor",href:"#pass-by-value","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h5",El,[l("Use Tag dispatch "),a(e,{class:"header-anchor",href:"#use-tag-dispatch","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),gl,s("h5",vl,[l("Constraining templates that take universal references "),a(e,{class:"header-anchor",href:"#constraining-templates-that-take-universal-references","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),bl,s("h5",Tl,[l("Trade-offs "),a(e,{class:"header-anchor",href:"#trade-offs","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),kl,wl,s("h4",xl,[l("条款28 理解引用折叠 "),a(e,{class:"header-anchor",href:"#条款28-理解引用折叠","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h4",Pl,[l("条款29 移动语义的缺点 "),a(e,{class:"header-anchor",href:"#条款29-移动语义的缺点","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h4",Wl,[l("条款30 熟悉完美转发的失败情况 "),a(e,{class:"header-anchor",href:"#条款30-熟悉完美转发的失败情况","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Rl,s("h5",Il,[l("Braced initializers "),a(e,{class:"header-anchor",href:"#braced-initializers","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),ql,Ml,Nl,s("h5",Hl,[l("0或者NULL作为空指针 "),a(e,{class:"header-anchor",href:"#_0或者null作为空指针","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h5",Ll,[l("仅声明的整数静态const数据成员 "),a(e,{class:"header-anchor",href:"#仅声明的整数静态const数据成员","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),zl,$l,Sl,s("h5",jl,[l("重载的函数名称和模板名称 "),a(e,{class:"header-anchor",href:"#重载的函数名称和模板名称","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Vl,Ul,s("h5",Ol,[l("位域 "),a(e,{class:"header-anchor",href:"#位域","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h3",Gl,[l("CHAPTER 6 Lambda表达式 "),a(e,{class:"header-anchor",href:"#chapter-6-lambda表达式","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h4",Jl,[l("条款31 避免使用默认捕获模式 "),a(e,{class:"header-anchor",href:"#条款31-避免使用默认捕获模式","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Zl,Kl,Ql,Xl,Yl,so,lo,s("h4",oo,[l("条款32 使用初始化捕获来移动对象到闭包中 "),a(e,{class:"header-anchor",href:"#条款32-使用初始化捕获来移动对象到闭包中","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),eo,ao,no,to,s("h4",co,[l("条款33 对于std::forward的auto&&形参使用decltype "),a(e,{class:"header-anchor",href:"#条款33-对于std-forward的auto-形参使用decltype","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),po,s("h4",ro,[l("条款34 考虑lambda表达式而非std::bind "),a(e,{class:"header-anchor",href:"#条款34-考虑lambda表达式而非std-bind","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Fo,s("h3",yo,[l("CHAPTER 7 并发API "),a(e,{class:"header-anchor",href:"#chapter-7-并发api","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h4",Do,[l("条款35 优先基于任务编程而不是基于线程 "),a(e,{class:"header-anchor",href:"#条款35-优先基于任务编程而不是基于线程","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),io,s("h4",Co,[l("条款36 确保在异步为必须时，才指定std::launch::async "),a(e,{class:"header-anchor",href:"#条款36-确保在异步为必须时-才指定std-launch-async","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Ao,ho,uo,Bo,s("h4",_o,[l("条款37: 从各个方面使得std::threads unjoinable "),a(e,{class:"header-anchor",href:"#条款37-从各个方面使得std-threads-unjoinable","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),mo,fo,s("h4",Eo,[l("条款38: 关注不同线程句柄析构行为 "),a(e,{class:"header-anchor",href:"#条款38-关注不同线程句柄析构行为","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),go,vo,s("h4",bo,[l("条款39: 对于一次性事件通讯考虑使用无返回future "),a(e,{class:"header-anchor",href:"#条款39-对于一次性事件通讯考虑使用无返回future","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),To,ko,s("h4",wo,[l("条款40: 对于并发请使用std::atomic、volatile用于特殊内存区 "),a(e,{class:"header-anchor",href:"#条款40-对于并发请使用std-atomic、volatile用于特殊内存区","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),xo,s("h3",Po,[l("CHAPTER 8 微调 "),a(e,{class:"header-anchor",href:"#chapter-8-微调","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),s("h4",Wo,[l("条款41 如果参数可拷贝并且移动操作开销很低，总是考虑直接按值传递 "),a(e,{class:"header-anchor",href:"#条款41-如果参数可拷贝并且移动操作开销很低-总是考虑直接按值传递","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),Ro,Io,qo,s("h4",Mo,[l("条款42 考虑使用emplacement代替insertion "),a(e,{class:"header-anchor",href:"#条款42-考虑使用emplacement代替insertion","aria-hidden":"true"},{default:o(()=>[l("#")]),_:1})]),No,Ho]),"main-header":o(()=>[t(n.$slots,"main-header")]),"main-header-after":o(()=>[t(n.$slots,"main-header-after")]),"main-nav":o(()=>[t(n.$slots,"main-nav")]),"main-content":o(()=>[t(n.$slots,"main-content")]),"main-content-after":o(()=>[t(n.$slots,"main-content-after")]),"main-nav-before":o(()=>[t(n.$slots,"main-nav-before")]),"main-nav-after":o(()=>[t(n.$slots,"main-nav-after")]),comment:o(()=>[t(n.$slots,"comment")]),footer:o(()=>[t(n.$slots,"footer")]),aside:o(()=>[t(n.$slots,"aside")]),"aside-custom":o(()=>[t(n.$slots,"aside-custom")]),default:o(()=>[t(n.$slots,"default")]),_:3},8,["frontmatter","data"])}const Ko=y(h,[["render",Lo]]);export{Zo as __pageData,Ko as default};
